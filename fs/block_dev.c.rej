--- fs/block_dev.c
+++ fs/block_dev.c
@@ -403,7 +402,7 @@
  *	NULL first argument is nfsd_sync_dir() and that's not a directory.
  */
  
-int block_fsync(struct file *filp, struct dentry *dentry, int datasync)
+static int block_fsync(struct file *filp, struct dentry *dentry, int datasync)
 {
 	return sync_blockdev(I_BDEV(filp->f_mapping->host));
 }
@@ -422,7 +421,6 @@
 		return NULL;
 	return &ei->vfs_inode;
 }
-EXPORT_SYMBOL(block_fsync);
 
 static void bdev_destroy_inode(struct inode *inode)
 {
@@ -1174,12 +1172,10 @@
 	/*
 	 * hooks: /n/, see "layering violations".
 	 */
-	if (!for_part) {
-		ret = devcgroup_inode_permission(bdev->bd_inode, perm);
-		if (ret != 0) {
-			bdput(bdev);
-			return ret;
-		}
+	ret = devcgroup_inode_permission(bdev->bd_inode, perm);
+	if (ret != 0) {
+		bdput(bdev);
+		return ret;
 	}
 
 	lock_kernel();
