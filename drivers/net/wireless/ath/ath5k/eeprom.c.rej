--- drivers/net/wireless/ath/ath5k/eeprom.c
+++ drivers/net/wireless/ath/ath5k/eeprom.c
@@ -1563,12 +1538,14 @@
 		if (!chinfo[pier].pd_curves)
 			continue;
 
-		for (pdg = 0; pdg < AR5K_EEPROM_N_PD_CURVES; pdg++) {
+		for (pdg = 0; pdg < ee->ee_pd_gains[mode]; pdg++) {
 			struct ath5k_pdgain_info *pd =
 					&chinfo[pier].pd_curves[pdg];
 
-			kfree(pd->pd_step);
-			kfree(pd->pd_pwr);
+			if (pd != NULL) {
+				kfree(pd->pd_step);
+				kfree(pd->pd_pwr);
+			}
 		}
 
 		kfree(chinfo[pier].pd_curves);
